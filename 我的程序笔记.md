####  我的程序员笔记

###### 前后端分离 -----WEB API

**可空类型** 

```c#
int? i = 3 
等同于
Nullable<int> i = new Nullable<int>(3);
```

**??** : 双问号 可用于判断一个变量在为 null 时返回一个指定的值。

定义**接口**

```c#
interface IMyInterface
{
    void MethodToImplement();
}
```

定义**枚举**

```C#
enum Days { Sun, Mon, tue, Wed, thu, Fri, Sat };
```

###### 特性

**特性（Attribute）**是用于在运行时传递程序中各种元素（比如类、方法、结构、枚举、组件等）的行为信息的声明性标签。您可以通过使用特性向程序添加声明性信息。一个声明性标签是通过放置在它所应用的元素前面的方括号（[ ]）来描述的。

###### 委托

委托声明决定了可由该委托引用的方法。委托可指向一个与其具有相同标签的方法。

```c#
using System;

delegate int NumberChanger(int n);
namespace DelegateAppl
{
   class TestDelegate
   {
      static int num = 10;
      public static int AddNum(int p)
      {
         num += p;
         return num;
      }

      public static int MultNum(int q)
      {
         num *= q;
         return num;
      }
      public static int getNum()
      {
         return num;
      }

      static void Main(string[] args)
      {
         // 创建委托实例
         NumberChanger nc1 = new NumberChanger(AddNum);
         NumberChanger nc2 = new NumberChanger(MultNum);
         // 使用委托对象调用方法
         nc1(25);
         Console.WriteLine("Value of Num: {0}", getNum());
         nc2(5);
         Console.WriteLine("Value of Num: {0}", getNum());
         Console.ReadKey();
      }
   }
}
```

#### JS的一些用法

- 创建一个仅对 `path` 路径页面有效的 cookie ，cookie 的有效期为 7 天

  ```js
  $.cookie('name', 'value', { expires: 7, path: '/' });
  ```

Math.ceil(x) 对数进行向上舍入

Math.floor(x) 对数进行向下舍入

**js抛出异常**

```javascript
try {
throw new Error("asdasdasd");
}
catch (e) {
console.log(e.name+'--------'+e.message);
}
```



#### 上传

**1 利用jquery.html5uploader**的插件使用

```c#
try
{
    HttpPostedFile hpf = Request.Files[0];
    string filename = hpf.FileName;
    string strpath = "/UploadFile/" + table + "/" + Request.Params["PID"] + "/";
 if(!Directory.Exists(HttpContext.Current.Server.MapPath(strpath))) { 
   Directory.CreateDirectory(HttpContext.Current.Server.MapPath(strpath));
  }
     hpf.SaveAs(HttpContext.Current.Server.MapPath("~" + strpath + filename));
     Response.Write("成功");
}
catch  {
        Response.Write("失败");
}
Response.End();

```

删除磁盘文件

```c#
string path = HttpContext.Current.Server.MapPath(model.FILE_NOTE); //文件路径
if (File.Exists(path))
{
    File.Delete(path);
}
```

#### 文件的操作

##### 1、写文件

```c#
 try
 {
     string filename;
     string name = Request.Params["name"].Replace("?", "");
     if (Request.Params["IsUserID"] == "false")
     {
         filename = HttpContext.Current.Server.MapPath("~/UploadFile/Cache/" + name);

     }
     else
     {
         filename = HttpContext.Current.Server.MapPath("~/UploadFile/Cache/" + name + CurrentUser.ID);

     }
     string strpath = filename.Substring(0, filename.LastIndexOf(@"\"));
     if (!Directory.Exists(strpath))
     {
         Directory.CreateDirectory(strpath);
     }
     FileStream aFile = new FileStream(filename, FileMode.Create); //文件路径
     StreamWriter sw = new StreamWriter(aFile);
     sw.Write(Request.Params["txt"]);   //开始写入文件
     Response.Write("保存成功!");
     sw.Close();
     aFile.Close();
 }
catch
{
    Response.Write("保存失败!");
}
Response.End();
```

##### 2、读文件

```c#
try
{
    string filename;
    string name = Request.Params["name"].Replace("?", "");
    if (Request.Params["IsUserID"] == "false")
    {
        filename = HttpContext.Current.Server.MapPath("~/UploadFile/Cache/" + name);
    }
    else
    {
        filename = HttpContext.Current.Server.MapPath("~/UploadFile/Cache/" + name + CurrentUser.ID);
    }
    if (File.Exists(filename))
    {
        FileStream aFile = new FileStream(filename, FileMode.Open); 
        //找到文件路径
        StreamReader sr = new StreamReader(aFile);
        Response.Write(sr.ReadToEnd());   //开始读文件
        sr.Close();
        aFile.Close();
    }
    else {
        Response.Write("");
    }
}
catch
{
    Response.Write("读取失败");
}
Response.End();
```

##### 3、java语言

```java
//读取文件(字节流)
InputStreamReader in = new InputStreamReader(new FileInputStream("d:\\1.txt"),"GBK");
//写入相应的文件
OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream("d:\\2.txt"));
//读取数据
//循环取出数据
byte[] bytes = new byte[1024];
int len = -1;
while ((len = in.read()) != -1) {
    System.out.println(len);
    //写入相关文件
    out.write(len);
}
//清楚缓存
out.flush();
//关闭流
in.close();
out.close();
```







